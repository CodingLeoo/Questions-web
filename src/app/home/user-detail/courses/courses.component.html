<div class="principal-container">
  <mat-card fxFlex="100"  class="unbordered-card list-container">
    <div *ngIf="courses | async as data; else loadingOrError">
      <div class="courses-container" fxLayout="column" fxLayoutAlign="start">
        <div class="courses-title">
          <h2>MY COURSES</h2>
          <mat-form-field class="search-input">
            <mat-icon id="search-icon" matPrefix>search</mat-icon>
            <input matInput placeholder="Search" autocomplete="off">
          </mat-form-field>
        </div>
        <div *ngFor="let course of data">
          <mat-card class="card">
            <mat-card-header>
              <img mat-card-avatar matTooltip="{{course.topic.name}}" src="{{course.topic.icon}}">
              <mat-card-title> {{course.title}} </mat-card-title>
              <mat-card-subtitle>you are {{getRole()}} in this course </mat-card-subtitle>
              <button id="detail-button" mat-raised-button matTooltip="view course detail">
                <img class="sample-icon" src="https://img.icons8.com/office/80/000000/Detail-view-of-part.png" />
              </button>
              <button id="user-button" mat-raised-button matTooltip="{{getButtonDescription()}}">
                <img class="sample-icon" src="{{getButtonUrl()}}" />
              </button>
            </mat-card-header>
            <mat-card-content>
              <p>
                {{course.description}}
              </p>
            </mat-card-content>
            <mat-card-footer class="footer" fxLayout="row" fxLayoutAlign="space-evenly center">
              <div fxLayout="row" fxLayoutAlign="space-between center">
                <img class="sample-icon" src="https://img.icons8.com/clouds/100/000000/create-new.png"
                  matTooltip="creation date" />
                <p>{{getFormattedDate(course.create_date)}} </p>
              </div>
              <div fxLayout="row" fxLayoutAlign="space-between center">
                <img class="sample-icon" src="https://img.icons8.com/plasticine/100/000000/approve-and-update.png"
                  matTooltip="last update date" />
                <p>{{getFormattedDate(course.last_update_date)}} </p>
              </div>
            </mat-card-footer>
          </mat-card>
        </div>
      </div>

    </div>
    <ng-template #loadingOrError>
      <div *ngIf="error != null; else loading">
        <div class="container" fxLayout="column" fxLayoutAlign="center center">
          <div class="error-image">
            <img src="{{error.image || GENERIC_ERROR_EMPTY_STATE}}">
          </div>
          <div class="error-text">
            <h3>{{error.status}}</h3>
          </div>
          <button id="start-btn" mat-button> START </button>
        </div>

      </div>
      <ng-template #loading>
        <div class="container" fxLayout="column" fxLayoutAlign="center center">
          <mat-spinner></mat-spinner>
        </div>
      </ng-template>
    </ng-template>
  </mat-card>
</div>
